<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.bookhub.product.mapper.GiftMapper">

    <insert id="insertGift" parameterType="com.example.bookhub.product.vo.Gift">
        insert into GIFT
        (sender_name, gift_send_method, buy_no)
        values
        (#{senderName}, #{sendMethod}, #{buy.buyNo})
        <selectKey keyProperty="giftNo" resultType="long" order="AFTER">
            select last_insert_id()
        </selectKey>
    </insert>

    <insert id="insertGiftReceiver" parameterType="com.example.bookhub.product.vo.GiftReceiver">
        insert into GIFT_RECEIVER
        (name, email, gift_no)
        values
        (#{name}, #{email}, #{gift.giftNo})
        <selectKey keyProperty="giftReceiverNo" resultType="long" order="AFTER">
            select last_insert_id()
        </selectKey>
    </insert>
</mapper>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.bookhub.main.mapper.SearchMapper">

    <!-- 상품 조회 -->
    <select id="getSearchList" resultMap="bookResultMap" parameterType="String">
        SELECT BOOK_NAME, BOOK_PUBLISHED_DATE, BOOK_DESCRIPTION, ISBN, BOOK_LIST_PRICE
        FROM BOOK
        <where>
            <if test="keyword != null and keyword != ''">
                AND BOOK_NAME LIKE CONCAT('%', #{keyword}, '%')
            </if>
        </where>
        ORDER BY BOOK_PUBLISHED_DATE DESC
    </select>

    <!--결과내 검색-->


    <resultMap id="bookResultMap" type="com.example.bookhub.main.vo.Book">
        <result column="BOOK_NAME" property="bookName"/>
        <result column="BOOK_PUBLISHED_DATE" property="bookPublishedDate"/>
        <result column="BOOK_DESCRIPTION" property="bookDescription"/>
        <result column="ISBN" property="isbn"/>
        <result column="BOOK_LIST_PRICE" property="bookListPrice"/>
    </resultMap>



    <select id="booksGetTotal" resultType="int">
        SELECT COUNT(*) FROM BOOK
    </select>


</mapper>